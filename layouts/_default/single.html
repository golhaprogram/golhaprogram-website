{{ define "title" }}{{ .Title }} | {{ .Site.Title }}{{ end }}
{{ define "main" }}
<article class="program">
    <header>
        <h1>{{ .Title }}</h1>
        {{ with .Params.date }}
        <time datetime="{{ . }}">{{ dateFormat "2006-01-02" . }}</time>
        {{ end }}
    </header>

    {{ with .Params.audio_url }}
    <div class="audio-player">
        <div class="audio-container">
            <audio controls>
                <source src="{{ . }}" type="audio/mpeg">
                Your browser does not support the audio element.
            </audio>
            <a href="{{ . }}" 
               download="{{ path.Base . }}"
               class="download-button" 
               title="دانلود"
               onclick="event.preventDefault(); window.open(this.href, '_blank');">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                    <polyline points="7 10 12 15 17 10"/>
                    <line x1="12" y1="15" x2="12" y2="3"/>
                </svg>
            </a>
        </div>
    </div>
    {{ end }}

    {{ if .Params.performers }}
    <div class="performers">
        {{ if .Params.performers.singers }}
        <div class="singers">
            <h3>خوانندگان:</h3>
            {{ range .Params.performers.singers }}
            <span class="performer">{{ . }}</span>
            {{ end }}
        </div>
        {{ end }}
        
        {{ if .Params.performers.players }}
        <div class="players">
            <h3>نوازندگان:</h3>
            {{ range .Params.performers.players }}
            <span class="performer">{{ . }}</span>
            {{ end }}
        </div>
        {{ end }}

        {{ if .Params.performers.poets }}
        <div class="poets">
            <h3>شعرا:</h3>
            {{ range .Params.performers.poets }}
            <span class="performer">{{ . }}</span>
            {{ end }}
        </div>
        {{ end }}

        {{ if .Params.performers.announcers }}
        <div class="announcers">
            <h3>گوینده:</h3>
            {{ range .Params.performers.announcers }}
            <span class="performer">{{ . }}</span>
            {{ end }}
        </div>
        {{ end }}
    </div>

    <div class="content">
        {{ .Content }}
    </div>

    {{ end }}

    <!-- Comments section -->
    <div class="comments">
        <div id="isso-thread" data-isso="//comments.golhaprogram.com/"
             data-isso-lang="fa"
             data-isso-max-comments-top="10"
             data-isso-max-comments-nested="5">
        </div>
    </div>
</article>

{{ end }}
